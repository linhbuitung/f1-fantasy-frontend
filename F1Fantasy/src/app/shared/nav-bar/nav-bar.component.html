<nav class="navbar navbar-expand-lg bg-white custom-navbar">
  <div class="container-fluid">
    <a class="navbar-brand logo" routerLink="/">
      <img ngSrc="assets/woof1-logo.svg" alt="WooF1 Logo" style="height: 40px;" height="94" width="375"/>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse nav-links" id="navbarText">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
                <a class="nav-link"
                routerLink="/"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: true }">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                routerLink="/fantasy"
                routerLinkActive="active"
                 [class.disabled]="!(isLoggedIn$ | async)"
                 [attr.tabindex]="(isLoggedIn$ | async) ? null : -1"
                 [attr.aria-disabled]="!(isLoggedIn$ | async) ? 'true' : null"
                 [style.pointer-events]="(isLoggedIn$ | async) ? 'auto' : 'none'">Fantasy</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                routerLink="/statistic"
                routerLinkActive="active">Statistic</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                routerLink="/about"
                routerLinkActive="active">About</a>
            </li>
            <li class="nav-item" *ngIf="(userProfile$ | async)?.roles?.includes('Admin') || (userProfile$ | async)?.roles?.includes('SuperAdmin')">
              <a class="nav-link" routerLink="/admin" routerLinkActive="active">Admin</a>
            </li>
        </ul>
        <div class="d-flex align-items-center gap-3 button-container">
            <ng-container *ngIf="userProfile$ | async as profile; else showAuth">
              <div class="position-relative d-inline-block me-2">
                <button
                  #notifBtn
                  class="btn user-notif-btn"
                  (click)="toggleNotif()"
                  type="button"
                  aria-haspopup="true"
                  [attr.aria-expanded]="showNotif ? 'true' : 'false'"
                >
                  <i class="fa-solid fa-bell"></i>
                  <ng-container *ngIf="unreadCount$ | async as c">
                    <span class="notif-badge" *ngIf="c > 0">{{ c }}</span>
                  </ng-container>
                </button>

                <!-- bind computed style; use ngStyle so we can switch to fixed viewport coords -->
                <div class="notif-dropdown" *ngIf="showNotif" [ngStyle]="notifDropdownStyle">
                  <app-notification-list></app-notification-list>
                </div>
              </div>
              <button class="btn btn-outline-danger user-btn" [routerLink]="['/profile', profile.id]">
                  <i class="fa-solid fa-user"></i>
                    {{ profile.displayName || profile.email }}
                </button>
              <button class="btn logout-btn" (click)="onLogout()">
                <i class="fa-solid fa-right-from-bracket"></i>
                Logout
              </button>
            </ng-container>
            <ng-template #showAuth>
                <button class="btn login-btn" routerLink="/login">
                    Login
                </button>
                <button class="btn register-btn" routerLink="/register">
                    Register
                </button>
            </ng-template>
            <a class="btn btn-danger donate-btn" target="_blank" href="https://ko-fi.com/H2H51LTFJC">
                Buy me a coffee
            </a>
        </div>
    </div>
  </div>
</nav>
